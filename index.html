<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#1a1f35" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="description" content="A professional Whack-a-Mole arcade game with synthesized sounds, combos, and golden moles!" />
  <title>ðŸ”¨ Whack-a-Mole</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap');

    *, *::before, *::after {
      box-sizing: border-box;
    }

    :root {
      --bg-dark: #0d1117;
      --bg-gradient: linear-gradient(135deg, #1a1f35 0%, #0d1117 100%);
      --accent: #4ecdc4;
      --glow: rgba(78, 205, 196, 0.3);
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: var(--bg-dark);
      color: #fff;
      font-family: 'Nunito', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      overflow: hidden;
      overscroll-behavior: none;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    body {
      background: var(--bg-gradient);
    }

    .wrap {
      /* Fullscreen on mobile by default */
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      height: 100dvh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg-dark);
      overflow: hidden;
    }

    /* Ensure background is solid when in browser fullscreen mode */
    :fullscreen .wrap,
    :-webkit-full-screen .wrap,
    :-moz-full-screen .wrap {
      width: 100vw;
      height: 100vh;
      background: #000;
    }

    canvas {
      display: block;
      /* On mobile, canvas fills the container */
      width: 100%;
      height: 100%;
      touch-action: none;
      -webkit-user-select: none;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    /* Desktop polish: keep a fixed-aspect card if screen is large enough */
    @media (pointer: fine) and (min-width: 1024px) {
      .wrap {
        position: relative;
        padding: 20px;
        height: 100vh;
      }
      canvas {
        width: auto;
        height: auto;
        max-width: 100%;
        max-height: 100%;
        border-radius: 24px;
        box-shadow: 
          0 0 40px rgba(78, 205, 196, 0.15),
          0 20px 60px rgba(0, 0, 0, 0.5);
      }
    }

    /* Subtle animated background glow */
    .wrap::before {
      content: '';
      position: fixed;
      top: 50%;
      left: 50%;
      width: 150vmax;
      height: 150vmax;
      transform: translate(-50%, -50%);
      background: radial-gradient(
        ellipse at center,
        rgba(78, 205, 196, 0.03) 0%,
        transparent 50%
      );
      pointer-events: none;
      animation: pulse 8s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }
      50% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
    }

    /* Loading state */
    .loading {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      color: var(--accent);
      font-weight: 700;
    }

    .loading::after {
      content: '';
      display: inline-block;
      width: 20px;
      animation: dots 1.5s steps(4) infinite;
    }

    @keyframes dots {
      0% { content: ''; }
      25% { content: '.'; }
      50% { content: '..'; }
      75% { content: '...'; }
    }

    /* Hide scrollbars */
    ::-webkit-scrollbar {
      display: none;
    }

    body {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    /* Ensure crisp rendering */
    canvas {
      image-rendering: -webkit-optimize-contrast;
    }

    /* Mobile landscape orientation hint */
    @media screen and (max-height: 500px) and (orientation: landscape) {
      .rotate-hint {
        display: flex;
      }
    }

    .rotate-hint {
      display: none;
      position: fixed;
      inset: 0;
      background: var(--bg-dark);
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 20px;
      z-index: 1000;
    }

    .rotate-hint svg {
      width: 60px;
      height: 60px;
      fill: var(--accent);
      animation: rotate-phone 2s ease-in-out infinite;
    }

    @keyframes rotate-phone {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-20deg); }
      75% { transform: rotate(20deg); }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <canvas id="game" width="720" height="900"></canvas>
  </div>

  <!-- Landscape rotation hint for mobile -->
  <div class="rotate-hint">
    <svg viewBox="0 0 24 24"><path d="M16.48 2.52c3.27 1.55 5.61 4.72 5.97 8.48h1.5C23.44 4.84 18.29 0 12 0l-.66.03 3.81 3.81 1.33-1.32zm-6.25-.77c-.59-.59-1.54-.59-2.12 0L1.75 8.11c-.59.59-.59 1.54 0 2.12l12.02 12.02c.59.59 1.54.59 2.12 0l6.36-6.36c-.59-.59-1.54-.59-2.12 0l-5.3 5.3L3.88 9.23l5.3-5.3c.59-.59.59-1.54 0-2.12l-.95-.06zm-2.1 18.73C4.85 18.93 2.52 15.76 2.16 12H.66c.51 6.16 5.66 11 11.95 11l.66-.03-3.81-3.81-1.33 1.32z"/></svg>
    <p style="color: var(--accent); font-weight: 700;">Rotate for best experience</p>
  </div>

  <script src="./main.js"></script>
</body>
</html>
